@import "../theme-base";
@import "resume_years.css";

@employee-color: #E8E8E8;

//// hard
//@base-color: #6fb5cc;
//@project-manager-color: #fda3cd;
//@architect-color: #88e4b7;
//@lead-developer-color: @base-color;
//@developer-color: #b3e2ff;
//@support-color: #fffbcc;

//soft
//@base-color: #82d8d8;
//@project-manager-color: #e6aecc;
//@architect-color: #b8d8a7;
//@lead-developer-color: @base-color;
//@developer-color: #a0bfed;
//@support-color: #e5be97;

// palette generated by https://learnui.design/tools/data-color-picker.html#palette
@base-color: #003f5c;
@project-manager-color: #58508d;
@architect-color: #bc5090;
@lead-developer-color: @base-color;
@developer-color: #ff6361;
@support-color: #ffa600;

@expert-color: #004c6d;
@proficient-color: #6996b3;
@competent-color: #c1e7ff;

@default-stripe-width: 2 * @small_spacing;
@default-top-spacing: 2 * @standard_spacing;
@default-stripe-angle: -45deg;
@title_color: black;
@link_color: @title_color;
@text_color: #444;
@current_year: 2019;
@first_year: 1985;
@last_year: 2020;
@years_per_block: 5;
@year_count: @last_year - @first_year;
@block_count: @year_count / @years_per_block;

@resume_spacing: 2 * @standard_spacing;

@minimum_width: 0;
@columns_per_year: 2;
@one_year_percent: 100 / @year_count;
@total_columns: @year_count * @columns_per_year;
@half_year: @columns_per_year / 2;

.set-basis(@numerator, @denominator)
{
  flex-basis: calc(~"("@numerator~" / "@denominator~") * 100%");
}

h2
{
  border: none;
}

h3
{
  margin-top: @resume_spacing;
}

h4
{
  font-size: 120%;
}

.footer
{
  display: none;
}

.text-flow .timeline
{
  position: relative;

  .timeline-box
  {
    position: relative;

    table
    {
      display: block;
      padding-top: @default-top-spacing;

      th
      {
        border: none;
      }

      thead
      {
        display: none;
      }

      tbody
      {
        display: block;

        tr
        {
          display: block;

          th:first-child
          {
            display: block;
            position: absolute; left: -15ex;
            width: 14ex;
            text-align: right;
            font-size: 80%;
          }

          td
          {
            display: block;

            &:nth-child(2)
            {
              display: flex;

              span:first-child:not(:empty)
              {
                text-align: right;
                padding-right: .5em;
                box-sizing: border-box;
              }

              span:last-child:not(:empty)
              {
                padding-left: .5em;
                box-sizing: border-box;
              }

              span:nth-child(3)
              {
                white-space: nowrap;
              }

              &.level-expert:after
              {
                /*TODO Fix these appends*/

                content: " (Expert)";
              }

              &.level-proficient:after
              {
                content: " (Proficient)";
              }

              &.level-competent:after
              {
                content: " (Competent)";
              }
            }

            &:nth-child(3)
            {
              display: none;
            }
          }
        }
      }
    }
  }

  .legend
  {
    position: absolute;
    font-size: @micro_font_size;
    left: @standard_spacing;
    top: @standard_spacing;

    &.early
    {
      left: auto;
      right: @standard_spacing;
    }

    caption:after
    {
      content: attr(title);
    }

    th:after
    {
      content: attr(title);
    }

    td
    {
      width: @default-stripe-width * 2;
      line-height: @compressed_text_flow_line_height;
      padding: 0;
    }
  }

  .years
  {
    display: flex;
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: -1;

    > div
    {
      .set-basis(@years_per_block, @year_count);
      padding-left: @small_spacing;
      border-left: @hairline_border_width solid @standard_border_color;
      box-sizing: border-box;
      opacity: .6;

      &:last-child
      {
        border-right: @hairline_border_width solid @standard_border_color;
      }

      &:after
      {
        content: attr(title);
      }
    }
  }
}

.text-flow
{
  section
  {
    div
    {
      &.contact
      {
        display: flex;

        div
        {
          flex: 4;
        }

        ul
        {
          flex: 2;
          list-style: none;
          padding-left: 0;

          li
          {
            padding-left: 0;
          }
        }
      }
    }
  }
}

section
{
  &:first-child
  {
    > h2
    {
      visibility: hidden;
    }
  }

  h2:first-child
  {
    flex: 1;
    font-variant: small-caps;
    margin-top: @resume_spacing;
    margin-right: @resume_spacing;
  }

  p:first-child,
  ul:first-child
  {
    margin-top: @resume_spacing;
  }

  > div
  {
    > h3:first-child
    {
      margin-top: @resume_spacing;
    }

    &:first-child
    {
      flex: 1;
      margin-top: 0;
      margin-right: @resume_spacing;

      > h3
      {
        margin-top: 0;
      }
    }
  }

  div
  {
    flex: 5;
    margin-top: 0;

    &.grid
    {
      margin-top: @resume_spacing;

      > div
      {
        margin-right: @resume_spacing;
        margin-bottom: @resume_spacing;

        h3:first-child
        {
          margin-top: 0;
        }
      }
    }
  }

  table.list
  {
    display: block;
    padding-left: @ul_indent;

    tr
    {
      &:first-child
      {
        display: none;
      }

      display: list-item;
      padding-left: @li_indent;

      th, td
      {
        display: inline;
      }

      th
      {
        border: none;

        &:after
        {
          content: ": ";
        }
      }
    }
  }
}


@media (min-width: @min-width-for-columns)
{
  section
  {
    display: flex;
  }
}

@media (max-width: @min-width-for-columns)
{
  .text-flow
  {
    .timeline
    {
      .years
      {
        font-size: @micro_font_size;
      }

      .timeline-box
      {
        table tbody tr
        {
          td
          {
            font-size: @micro_font_size;
          }

          th:first-child
          {
            display: none;
          }
        }
      }
    }

    table.basic.legend
    {
      position: relative;
      margin: 2 * @standard_spacing 0;

      &.early
      {
        left: @standard_spacing;
        right: auto;
      }
    }

    section div.contact
    {
      display: block;
    }
  }
}

@media (max-width: 320px)
{
  .text-flow
  {
    .timeline
    {
      .years
      {
        font-size: @nano_font_size;
      }

      .timeline-box
      {
        table tbody tr
        {
          td
          {
            font-size: @nano_font_size;
          }

          th:first-child
          {
            display: none;
          }
        }
      }
    }
  }
}

@media print
{
  body
  {
    .page
    {
      .header
      {
        .nav-box
        {
          display: none;
        }
      }

      section
      {
        display: block;

        div
        {
          &.grid
          {
            > div
            {
              // Move columns a bit closer together to use less whitespace
              margin-right: @standard_spacing * 2;
            }
          }
        }
      }
    }
  }

  .page-break
  {
    page-break-before: always;
  }
}

.projects
{
  ul
  {
    padding: 0;
    margin: 0;
    list-style: none;

    li
    {
      padding: 0;
      margin: @small_spacing 0;
    }
  }
}

.use-translucent-background(@opacity, @background-color: @base-color)
{
  .make-background-container();
  background-color: mix(@background-color, white, @opacity * 100);
}

.use-background(@color)
{
  .make-background-container();
  background-color: @color;
}

.make-background-container()
{
  margin: @hairline_border_width 0;
}

.level-expert
{
  .use-background(@expert-color);
}

.level-proficient
{
  .use-background(@proficient-color);
}

.level-competent
{
  .use-background(@competent-color);
}

.support
{
  .use-background(@support-color);
}

.developer
{
  .use-background(@developer-color);
}

.lead-developer
{
  .use-background(@lead-developer-color);
}

.architect
{
  .use-background(@architect-color);
}

.project-manager
{
  .use-background(@project-manager-color);
}

.employee
{
  position: absolute;
  width: 100%;
  height: calc(100%~" - "@default-top-spacing);
  z-index: -2;

  span:nth-child(2)
  {
    .use-background(@employee-color);
  }
}

.two-color-diagonal-stripes(@first-color, @second-color, @stripe-width: @default-stripe-width, @stripe-angle: @default-stripe-angle)
{
  background: repeating-linear-gradient(
    @stripe-angle,
    @first-color,
    @first-color @stripe-width,
    @second-color @stripe-width,
    @second-color 2 * @stripe-width,
  );
}

.three-color-diagonal-stripes(@first-color, @second-color, @third-color, @stripe-width: @default-stripe-width, @stripe-angle: @default-stripe-angle)
{
  background: repeating-linear-gradient(
    @stripe-angle,
    @first-color,
    @first-color @stripe-width,
    @second-color @stripe-width,
    @second-color 2 * @stripe-width,
    @third-color 2 * @stripe-width,
    @third-color 3 * @stripe-width
  );
}

.four-color-diagonal-stripes(@first-color, @second-color, @third-color, @fourth-color, @stripe-width: @default-stripe-width, @stripe-angle: @default-stripe-angle)
{
  background: repeating-linear-gradient(
    @stripe-angle,
    @first-color,
    @first-color @stripe-width,
    @second-color @stripe-width,
    @second-color 2 * @stripe-width,
    @third-color 2 * @stripe-width,
    @third-color 3 * @stripe-width,
    @fourth-color 3 * @stripe-width,
    @fourth-color 4 * @stripe-width
  );
}

.project-manager.architect.lead-developer.support
{
  .four-color-diagonal-stripes(@architect-color, @project-manager-color, @lead-developer-color, @support-color);
}

.project-manager.architect.lead-developer
{
  .three-color-diagonal-stripes(@architect-color, @project-manager-color, @lead-developer-color);
}

.project-manager.architect.developer
{
  .three-color-diagonal-stripes(@architect-color, @project-manager-color, @developer-color);
}

.architect.lead-developer
{
  .two-color-diagonal-stripes(@architect-color, @lead-developer-color);
}

.project-manager.developer
{
  .two-color-diagonal-stripes(@project-manager-color, @developer-color);
}

.architect.developer
{
  .two-color-diagonal-stripes(@architect-color, @developer-color);
}

.project-manager.lead-developer.support
{
  .three-color-diagonal-stripes(@project-manager-color, @lead-developer-color, @support-color);
}

.project-manager.developer.support
{
  .three-color-diagonal-stripes(@project-manager-color, @developer-color, @support-color);
}

.lead-developer.support
{
  .two-color-diagonal-stripes(@lead-developer-color, @support-color);
}

.developer.support
{
  .two-color-diagonal-stripes(@developer-color, @support-color);
}

.single-line
{
  > div:nth-child(2)
  {
    margin-top: -@default-top-spacing;
    color: transparent;
  }
}